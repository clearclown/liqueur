# @liqueur/react

React components for rendering Liquid Protocol schemas

## Overview

`@liqueur/react` provides React components that render UI from Liquid Protocol schemas. This library enables dynamic, data-driven UIs generated by AI or defined programmatically.

## Features

- **LiquidRenderer** - Main component for rendering complete schemas
- **Chart components** - Bar, line, and pie charts using Recharts
- **Table components** - Interactive tables with @tanstack/react-table
- **Layout system** - Grid and Stack layouts
- **Data fetching hook** - `useLiquidView` for loading data
- **Loading states** - Built-in loading indicators
- **Type-safe** - Full TypeScript support

## Installation

```bash
npm install @liqueur/react @liqueur/protocol
```

### Peer Dependencies

```bash
npm install react@^18.0.0
```

## Usage

### Basic Example

```tsx
import { LiquidRenderer } from '@liqueur/react';
import type { LiquidViewSchema } from '@liqueur/protocol';

const schema: LiquidViewSchema = {
  version: '1.0',
  layout: {
    type: 'grid',
    columns: 2,
    gap: 16
  },
  components: [
    {
      type: 'chart',
      variant: 'bar',
      title: 'Monthly Sales',
      data_source: 'sales'
    },
    {
      type: 'table',
      columns: ['month', 'amount'],
      title: 'Sales Data',
      data_source: 'sales'
    }
  ],
  data_sources: {
    sales: {
      resource: 'sales'
    }
  }
};

const data = {
  sales: [
    { month: 'Jan', amount: 1000 },
    { month: 'Feb', amount: 1500 },
    { month: 'Mar', amount: 1200 }
  ]
};

function App() {
  return <LiquidRenderer schema={schema} data={data} />;
}
```

### With Data Fetching Hook

```tsx
import { LiquidRenderer, useLiquidView } from '@liqueur/react';

function App() {
  const { data, loading, error } = useLiquidView({ schema });

  if (error) return <div>Error: {error.message}</div>;

  return <LiquidRenderer schema={schema} data={data} loading={loading} />;
}
```

## Components

### LiquidRenderer

Main component for rendering complete schemas.

**Props:**
- `schema: LiquidViewSchema` - The schema to render
- `data?: Record<string, unknown[]>` - Data mapped by data_source name
- `loading?: boolean` - Show loading indicators
- `className?: string` - CSS class name

### ChartComponent

Renders charts (bar, line, pie).

**Props:**
- `variant: 'bar' | 'line' | 'pie'` - Chart type
- `title?: string` - Chart title
- `data_source?: string` - Data source name
- `data?: unknown[]` - Chart data
- `loading?: boolean` - Loading state
- `width?: number | string` - Chart width
- `height?: number` - Chart height (default: 300)
- `xKey?: string` - X-axis key (default: first key)
- `yKeys?: string[]` - Y-axis keys (default: all numeric keys)

### TableComponent

Renders interactive tables.

**Props:**
- `columns: string[]` - Column names
- `title?: string` - Table title
- `data_source?: string` - Data source name
- `data?: unknown[]` - Table data
- `loading?: boolean` - Loading state

## Hooks

### useLiquidView

Fetches data for a Liquid schema (Phase 1: mock data, Phase 2: API integration).

```typescript
const { data, loading, error } = useLiquidView({ schema });
```

**Parameters:**
- `schema: LiquidViewSchema` - Schema with data_sources

**Returns:**
- `data: Record<string, unknown[]>` - Data mapped by data_source name
- `loading: boolean` - Loading state
- `error: Error | null` - Error if any occurred

## Layouts

### GridLayout

CSS Grid-based responsive layout.

```tsx
<GridLayout columns={2} gap={16}>
  {children}
</GridLayout>
```

### StackLayout

Vertical stacking layout.

```tsx
<StackLayout gap={16}>
  {children}
</StackLayout>
```

## Development

```bash
# Build
npm run build

# Test
npm test

# Test with coverage
npm run test:coverage

# Lint
npm run lint

# Type check
npm run typecheck
```

## Contributing

See the main [repository](https://github.com/your-org/liqueur) for contribution guidelines.

## License

MIT
